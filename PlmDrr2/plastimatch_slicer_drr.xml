<?xml version="1.0" encoding="UTF-8"?>
<executable>
  <category>Plastimatch</category>
  <title>DRR computation</title>
  <description><![CDATA[This is a CLI module that computes a synthetic radiograph (DRR) which can be generated from a CT scan.]]></description>
  <version>0.0.1</version>
  <documentation-url>http://www.plastimatch.org/drr.html</documentation-url>
  <license>Slicer</license>
  <contributor>Mikhail Polkovnikov (NRS \'Kurchatov Institute\' - IHEP)</contributor>
  <acknowledgements></acknowledgements>

  <parameters>
    <label>IO</label>
    <description><![CDATA[Input/output parameters]]></description>
    <double>
      <name>sigma</name>
      <longflag>sigma</longflag>
      <flag>s</flag>
      <label>Sigma</label>
      <description><![CDATA[A double value (in units of mm) passed to the algorithm]]></description>
      <default>1.0</default>
    </double>

    <image>
      <name>inputVolume</name>
      <label>Input Volume</label>
      <channel>input</channel>
      <index>0</index>
      <description><![CDATA[Input volume]]></description>
    </image>

    <image>
      <name>outputVolume</name>
      <label>Output Volume</label>
      <channel>output</channel>
      <index>1</index>
      <description><![CDATA[Output Volume]]></description>
    </image>
  </parameters>

  <parameters>
    <label>Geometry parameters</label>
    <description><![CDATA[Basic geometry parameters of source and imager]]></description>
    <double>
      <name>sourceAxisDistance</name>
      <longflag>sad</longflag>
      <description>Source-Axis distance</description>
      <label>SAD</label>
      <default>1000</default>
      <constraints>
        <minimum>400</minimum>
        <maximum>2000</maximum>
        <step>.01</step>
      </constraints>
    </double>

    <double>
      <name>sourceImagerDistance</name>
      <longflag>sid</longflag>
      <description>Source-Imager distance</description>
      <label>SID</label>
      <default>1400</default>
      <constraints>
        <minimum>400</minimum>
        <maximum>4000</maximum>
        <step>.01</step>
      </constraints>
    </double>

    <float-vector>
      <name>viewUpVector</name>
      <label>View-Up</label>
      <longflag>vup</longflag>
      <default>-1.0,0.0,0.0</default>
    </float-vector> 

    <float-vector>
      <name>normalVector</name>
      <label>Normal</label>
      <flag>n</flag>
      <longflag>normal</longflag>
      <default>0.0,0.0,1.0</default>
    </float-vector>

    <float-vector>
      <name>isocenterPosition</name>
      <flag>o</flag>
      <longflag>isocenter</longflag>
      <description>Isocenter position in LPS coordinate system</description>
      <label>Isocenter</label>
      <default>0.0,0.0,0.0</default>
    </float-vector>
  </parameters>

  <parameters>
    <label>Imager parameters</label>
    <description><![CDATA[Image and imager parameters]]></description>
    <integer-vector>
      <name>imagerResolution</name>
      <flag>r</flag>
      <longflag>resolution</longflag>
      <description>Imager resolution (columns, rows)</description>
      <label>Resolution</label>
      <default>2000, 2000</default>
    </integer-vector>

    <float-vector>
      <name>imagerSpacing</name>
      <flag>p</flag>
      <longflag>spacing</longflag>
      <description>Imager spacing in mm (columns, rows)</description>
      <label>Spacing</label>
      <default>0.25, 0.25</default>
    </float-vector>

    <integer-vector>
      <name>imageWindow</name>
      <flag>w</flag>
      <longflag>subwindow</longflag>
      <description>Limit DRR output to a subwindow (row1 row2 column1 column2)</description>
      <label>Image window</label>
      <default>0, 1999, 0, 1999</default>
    </integer-vector>
  </parameters>

  <parameters>
    <label>Process parameters</label>
    <description><![CDATA[DRR computation process parameters]]></description>
     <string-enumeration>
     <label>Threading type</label>
     <name>threading</name>
     <flag>A</flag>
     <default>cpu</default>
     <element>cpu</element>
     <element>cuda</element>
     <element>opencl</element>
     </string-enumeration>

     <string-enumeration>
     <label>HU conversion type</label>
     <name>huconversion</name>
     <flag>P</flag>
     <default>preprocess</default>
     <element>preprocess</element>
     <element>inline</element>
     <element>none</element>
     </string-enumeration>

     <string-enumeration>
     <label>Exposure type</label>
     <name>algorithm</name>
     <flag>i</flag>
     <default>exact</default>
     <element>exact</element>
     <element>uniform</element>
     </string-enumeration>
  </parameters>

</executable>
